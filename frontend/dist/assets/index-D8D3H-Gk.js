var ee=Object.defineProperty;var te=(r,t,s)=>t in r?ee(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var U=(r,t,s)=>te(r,typeof t!="symbol"?t+"":t,s);import{r as re,c as I,j as e,R as K,B as d,T as f,a as S,L as V,C as W,P as D,S as se,b as ae,d as oe,e as l,f as ne,g as ie,A as ce,D as le,h as N,i as de,k as pe,l as he,m as ue,I as ye,n as me,o as R,p as xe,q as fe,s as ge,t as je,u as ve}from"./vendor-CbHWyJ2X.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();var H={},F=re;H.createRoot=F.createRoot,H.hydrateRoot=F.hydrateRoot;const be=I(e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),Ce=I(e.jsx("path",{d:"M5 13h14v-2H5zm-2 4h14v-2H3zM7 7v2h14V7z"}),"ClearAll"),we=I(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),Ae=I(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error"),T=I(e.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh"),Se=I(e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");class Ie extends K.Component{constructor(s){super(s);U(this,"handleRetry",()=>{this.setState({hasError:!1,error:null}),this.props.onRetry&&this.props.onRetry()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,i){console.error("Component Error:",s,i)}render(){var s;return this.state.hasError?e.jsxs(d,{sx:{p:3,textAlign:"center",border:"1px solid #ffcdd2",borderRadius:1,bgcolor:"#ffebee"},children:[e.jsx(f,{variant:"h6",color:"error",gutterBottom:!0,children:"Something went wrong"}),e.jsx(f,{color:"textSecondary",paragraph:!0,children:((s=this.state.error)==null?void 0:s.message)||"An unexpected error occurred"}),e.jsx(S,{variant:"contained",color:"primary",startIcon:e.jsx(T,{}),onClick:this.handleRetry,children:"Retry"})]}):this.props.children}}const ke={circular:({size:r=40,message:t})=>e.jsxs(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",p:4},children:[e.jsx(W,{size:r}),t&&e.jsx(f,{variant:"body2",color:"text.secondary",sx:{mt:2},children:t})]}),linear:({message:r})=>e.jsxs(d,{sx:{width:"100%"},children:[e.jsx(V,{}),r&&e.jsx(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:r})]}),skeleton:({children:r})=>r,pulse:({width:r="100%",height:t="100px"})=>e.jsx(d,{sx:{width:r,height:t,backgroundColor:"background.paper",animation:"pulse 1.5s infinite","@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.5},"100%":{opacity:1}}}})},Re=({variant:r="circular",fullPage:t=!1,message:s,size:i,width:a,height:o,children:u})=>{const v=ke[r];return v?e.jsx(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:t?"60vh":"auto",width:"100%"},children:e.jsx(v,{message:s,size:i,width:a,height:o,children:u})}):(console.warn(`Unknown loading variant: ${r}`),null)},Te={search:Se,refresh:T,error:Ae},_=({type:r="default",title:t="No Data Available",message:s="There is no data to display at the moment.",actionText:i,onAction:a,icon:o="search",customIcon:u})=>{const v=u||Te[o];return e.jsxs(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",p:4,textAlign:"center",minHeight:r==="fullPage"?"60vh":"300px",backgroundColor:"background.paper",borderRadius:1},children:[e.jsx(v,{sx:{fontSize:64,color:"text.secondary",mb:2,opacity:.5}}),e.jsx(f,{variant:"h6",gutterBottom:!0,children:t}),e.jsx(f,{variant:"body1",color:"text.secondary",sx:{maxWidth:400,mb:3},children:s}),i&&a&&e.jsx(S,{variant:"contained",onClick:a,startIcon:e.jsx(T,{}),children:i})]})},Le=[{label:"App Analysis",description:"Analyzing app metrics and performance"},{label:"Competitor Analysis",description:"Comparing with competitor apps"},{label:"Keyword Analysis",description:"Analyzing keyword performance and trends"}],ze=({current:r,total:t,error:s})=>{const i=Math.max(0,r-1),a=t>0?r/t*100:0;return e.jsx(D,{elevation:2,sx:{p:3,mb:3},children:e.jsxs(d,{sx:{width:"100%"},children:[e.jsx(se,{activeStep:i,alternativeLabel:!0,children:Le.map((o,u)=>{const v={},x={};return s&&u===i&&(x.error=!0),e.jsx(ae,{...v,children:e.jsxs(oe,{...x,children:[o.label,e.jsx(f,{variant:"caption",display:"block",color:"text.secondary",sx:{mt:.5},children:o.description})]})},o.label)})}),e.jsxs(d,{sx:{mt:3},children:[e.jsx(V,{variant:"determinate",value:a,color:s?"error":"primary"}),e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:[e.jsxs(f,{variant:"body2",color:"text.secondary",children:[r," of ",t," steps completed"]}),e.jsxs(f,{variant:"body2",color:"text.secondary",children:[Math.round(a),"%"]})]})]})]})})},$="1.0",Pe=1e3*60*5;class Ee{constructor(){this.cache=new Map,this.init()}init(){try{const t=localStorage.getItem("app_cache");if(t){const{version:s,data:i}=JSON.parse(t);s===$&&Object.entries(i).forEach(([a,o])=>{o.timestamp&&this.cache.set(a,{...o,timestamp:new Date(o.timestamp)})})}}catch(t){console.warn("Failed to load cache from localStorage:",t)}}save(){try{const t={};this.cache.forEach((s,i)=>{t[i]=s}),localStorage.setItem("app_cache",JSON.stringify({version:$,data:t}))}catch(t){console.warn("Failed to save cache to localStorage:",t)}}get(t){const s=this.cache.get(t);return s?s.ttl&&Date.now()-s.timestamp>s.ttl?(this.cache.delete(t),this.save(),null):s.data:null}set(t,s,i=Pe){this.cache.set(t,{data:s,timestamp:new Date,ttl:i}),this.save()}invalidate(t){this.cache.delete(t),this.save()}clear(){this.cache.clear(),localStorage.removeItem("app_cache")}}const J=new Ee,_e=()=>J.clear(),M=(r,t,s)=>J.set(r,t,s),O={app:r=>`app_analysis_${r}`,competitors:(r,t)=>`competitor_analysis_${r}_${t.sort().join("_")}`,keywords:(r,t)=>`keyword_analysis_${r}_${t.sort().join("_")}`},B={app:1e3*60*30,competitors:1e3*60*60,keywords:1e3*60*60*2},Me=()=>{const[r,t]=l.useState(!1),[s,i]=l.useState(null),[a,o]=l.useState({current:0,total:0}),u=(n,y)=>{o({current:n,total:y})},v=async n=>{const y=await fetch(`/api/analyze/app/${n}`);if(!y.ok)throw new Error(`App analysis failed: ${y.statusText}`);return y.json()},x=async(n,y)=>{const g=await fetch("/api/analyze/competitors/compare",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({app_id:n,competitor_ids:y})});if(!g.ok)throw new Error(`Competitor analysis failed: ${g.statusText}`);return g.json()},L=async(n,y)=>{const g=await fetch("/api/analyze/keywords/discover",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({app_id:n,competitor_ids:y})});if(!g.ok)throw new Error(`Keyword analysis failed: ${g.statusText}`);return g.json()};return{analyzeApp:l.useCallback(async(n,y,g={})=>{const{forceFresh:A=!1}=g,p=y.map(m=>m.appId);try{t(!0),i(null),o({current:0,total:3});let m;const k=O.app(n.appId);A||(m=getCached(k)),m||(m=await v(n.appId),M(k,m,B.app)),u(1,3);let b;if(y.length>0){const z=O.competitors(n.appId,p);A||(b=getCached(z)),b||(b=await x(n.appId,p),M(z,b,B.competitors))}u(2,3);const j=O.keywords(n.appId,p);let C;return A||(C=getCached(j)),C||(C=await L(n.appId,p),M(j,C,B.keywords)),u(3,3),{appAnalysis:m,competitorAnalysis:b,keywordAnalysis:C}}catch(m){throw i(m.message),m}finally{t(!1),o({current:0,total:0})}},[]),loading:r,error:s,progress:a}},Oe=()=>{const[r,t]=l.useState({url:"",appId:""}),[s,i]=l.useState([]),[a,o]=l.useState(""),[u,v]=l.useState(-1),[x,L]=l.useState(0),[w,n]=l.useState({open:!1,message:"",severity:"info"}),[y,g]=l.useState(null),{analyzeApp:A,loading:p,error:m,progress:k}=Me(),b=l.useCallback(()=>{_e(),n({open:!0,message:"Cache cleared successfully",severity:"success"})},[]),j=l.useCallback(h=>{const c=h.match(/id=([^&]+)/);return c?c[1]:""},[]),C=l.useCallback(h=>{const c=h.target.value,E=j(c);t({url:c,appId:E}),!E&&c&&n({open:!0,message:"Invalid Play Store URL. Please check the format.",severity:"warning"})},[j]),z=l.useCallback(()=>{if(!a){n({open:!0,message:"Please enter a competitor URL",severity:"warning"});return}const h=j(a);if(!h){n({open:!0,message:"Invalid Play Store URL. Please check the format.",severity:"warning"});return}if(s.some(c=>c.appId===h)){n({open:!0,message:"This competitor is already added",severity:"warning"});return}i(c=>[...c,{url:a,appId:h}]),o("")},[a,s,j]),P=l.useCallback(async(h=!1)=>{if(!r.appId){n({open:!0,message:"Please enter a valid app URL",severity:"error"});return}try{const c=await A(r,s,{forceFresh:h});g(c),n({open:!0,message:"Analysis completed successfully",severity:"success"}),L(0)}catch(c){n({open:!0,message:`Analysis failed: ${c.message}`,severity:"error"})}},[r,s,A]),q=()=>e.jsxs(d,{sx:{mb:4},children:[e.jsx(f,{variant:"h4",gutterBottom:!0,children:"ASO Analysis Tool"}),e.jsx(f,{variant:"body1",color:"text.secondary",paragraph:!0,children:"Analyze your app's performance and compare it with competitors"}),e.jsx(le,{})]}),G=()=>e.jsxs(D,{elevation:2,sx:{p:2,mb:3},children:[e.jsx(f,{variant:"h6",gutterBottom:!0,children:"Main App"}),e.jsx(N,{fullWidth:!0,label:"Play Store URL",variant:"outlined",value:r.url,onChange:C,error:r.url&&!r.appId,helperText:r.url&&!r.appId?"Invalid Play Store URL":"",disabled:p,sx:{mb:2}})]}),Y=()=>e.jsxs(D,{elevation:2,sx:{p:2,mb:3},children:[e.jsx(f,{variant:"h6",gutterBottom:!0,children:"Competitors"}),e.jsxs(d,{sx:{display:"flex",gap:1,mb:2},children:[e.jsx(N,{fullWidth:!0,label:"Competitor Play Store URL",variant:"outlined",value:a,onChange:h=>o(h.target.value),error:a&&!j(a),helperText:a&&!j(a)?"Invalid Play Store URL":"",disabled:p}),e.jsx(S,{variant:"contained",startIcon:e.jsx(be,{}),onClick:z,disabled:!j(a)||p,children:"Add"})]}),s.length>0?e.jsx(de,{children:s.map((h,c)=>e.jsxs(pe,{children:[e.jsx(he,{primary:h.url,secondary:h.appId}),e.jsx(ue,{children:e.jsx(ye,{edge:"end",onClick:()=>{i(E=>E.filter((Ue,Z)=>Z!==c))},disabled:p,color:"error",children:e.jsx(we,{})})})]},c))}):e.jsx(_,{type:"compact",title:"No Competitors Added",message:"Add competitor apps to compare and analyze",icon:"search"})]}),Q=()=>e.jsxs(d,{sx:{display:"flex",justifyContent:"center",gap:2,mb:4},children:[e.jsx(S,{variant:"contained",color:"primary",size:"large",onClick:()=>P(!1),disabled:!r.appId||p,startIcon:p?e.jsx(W,{size:20}):e.jsx(T,{}),children:p?"Analyzing...":"Analyze"}),e.jsx(S,{variant:"outlined",color:"primary",size:"large",onClick:()=>P(!0),disabled:!r.appId||p,startIcon:e.jsx(T,{}),children:"Force Fresh Analysis"}),e.jsx(S,{variant:"outlined",color:"secondary",size:"large",onClick:b,disabled:p,startIcon:e.jsx(Ce,{}),children:"Clear Cache"})]}),X=()=>p?e.jsxs(e.Fragment,{children:[e.jsx(ze,{current:k.current,total:k.total,error:m}),e.jsx(Re,{variant:"skeleton",message:"Analyzing app and competitors...",children:e.jsx(LoadingSkeleton,{type:x===1?"keywords":x===2?"reviews":"overview"})})]}):m?e.jsx(_,{type:"error",title:"Analysis Failed",message:m,actionText:"Retry Analysis",onAction:()=>P(!0),icon:"error"}):y?e.jsxs(d,{mt:4,children:[e.jsxs(me,{value:x,onChange:(h,c)=>L(c),variant:"scrollable",scrollButtons:"auto",children:[e.jsx(R,{label:"Overview"}),e.jsx(R,{label:"Keywords"}),e.jsx(R,{label:"Reviews"}),e.jsx(R,{label:"Metadata"}),e.jsx(R,{label:"Performance"})]}),e.jsx(Ie,{onRetry:()=>P(!0),children:e.jsxs(d,{mt:2,children:[x===0&&renderOverviewTab(),x===1&&renderKeywordsTab(),x===2&&renderReviewsTab(),x===3&&renderMetadataTab(),x===4&&renderPerformanceTab()]})})]}):e.jsx(_,{type:"default",title:"No Analysis Results",message:"Start by analyzing your app and its competitors",icon:"search"});return e.jsxs(ne,{maxWidth:"lg",children:[e.jsxs(d,{sx:{my:4},children:[q(),G(),Y(),Q(),X()]}),e.jsx(ie,{open:w.open,autoHideDuration:6e3,onClose:()=>n({...w,open:!1}),children:e.jsx(ce,{onClose:()=>n({...w,open:!1}),severity:w.severity,sx:{width:"100%"},children:w.message})})]})},Be=()=>e.jsx(xe,{position:"static",color:"transparent",elevation:0,children:e.jsx(fe,{children:e.jsx(d,{sx:{flexGrow:1,display:"flex",alignItems:"center",py:2},children:e.jsx("img",{src:"https://badho.in/wp-content/uploads/2023/12/Badho-Logo-1.png",alt:"Badho Logo",style:{height:"40px",marginRight:"20px"}})})})}),De=ge({palette:{mode:"light",primary:{main:"#2196f3"},secondary:{main:"#f50057"}}});function He(){return e.jsxs(je,{theme:De,children:[e.jsx(ve,{}),e.jsx(Be,{}),e.jsx(Oe,{})]})}H.createRoot(document.getElementById("root")).render(e.jsx(K.StrictMode,{children:e.jsx(He,{})}));
