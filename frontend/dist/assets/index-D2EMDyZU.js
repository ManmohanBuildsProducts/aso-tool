import{r as _,c as m,j as e,a as x,C as k,B as j,T as d,b as A,d as z,e as b,f as q,g as R,h as G,i as J,k as g,L as Y,l as $,m as Q,n as X,I as y,G as i,P as f,o as Z,p as ee,q as te,R as se}from"./vendor-CTrWeA0k.js";(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}})();var I={},S=_;I.createRoot=S.createRoot,I.hydrateRoot=S.hydrateRoot;const ae=m(e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),re=m(e.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel"),ne=m(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),ie=m(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),oe=m(e.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh"),le=m(e.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save"),ce=()=>{const[n,p]=x.useState({url:"",appId:"",loading:!1}),[o,l]=x.useState([]),[s,r]=x.useState(""),[h,v]=x.useState(-1),[T,L]=x.useState(null),[u,M]=x.useState(0),C=t=>{const a=t.match(/id=([^&]+)/);return a?a[1]:""},P=t=>{const a=t.target.value;p({...n,url:a,appId:C(a)})},w=()=>{if(s){const t=C(s);t&&(l([...o,{url:s,appId:t,loading:!1}]),r(""))}},O=t=>{v(t)},B=(t,a)=>{const c=[...o];c[t]={url:a,appId:C(a),loading:!1},l(c),v(-1)},E=t=>{l(o.filter((a,c)=>c!==t))},V=async()=>{if(n.appId){p({...n,loading:!0}),l(o.map(t=>({...t,loading:!0})));try{const a=await(await fetch("/api/analyze/competitors/compare",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({app_id:n.appId,competitor_ids:o.map(c=>c.appId)})})).json();L(a)}catch(t){console.error("Analysis failed:",t)}finally{p({...n,loading:!1}),l(o.map(t=>({...t,loading:!1})))}}},D=()=>e.jsx(Y,{children:o.map((t,a)=>e.jsxs($,{children:[h===a?e.jsx(b,{fullWidth:!0,value:t.url,onChange:c=>B(a,c.target.value),variant:"outlined",size:"small"}):e.jsx(Q,{primary:t.url,secondary:t.appId}),e.jsx(X,{children:h===a?e.jsxs(e.Fragment,{children:[e.jsx(y,{edge:"end",onClick:()=>v(-1),size:"small",children:e.jsx(le,{})}),e.jsx(y,{edge:"end",onClick:()=>v(-1),size:"small",children:e.jsx(re,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{edge:"end",onClick:()=>O(a),size:"small",children:e.jsx(ie,{})}),e.jsx(y,{edge:"end",onClick:()=>E(a),size:"small",children:e.jsx(ne,{})})]})})]},a))}),H=()=>T?e.jsxs(j,{mt:4,children:[e.jsxs(J,{value:u,onChange:(t,a)=>M(a),variant:"scrollable",scrollButtons:"auto",children:[e.jsx(g,{label:"Overview"}),e.jsx(g,{label:"Keywords"}),e.jsx(g,{label:"Reviews"}),e.jsx(g,{label:"Metadata"}),e.jsx(g,{label:"Performance"})]}),e.jsxs(j,{mt:2,children:[u===0&&N(),u===1&&U(),u===2&&F(),u===3&&K(),u===4&&W()]})]}):null,N=()=>e.jsx(i,{container:!0,spacing:3,children:e.jsx(i,{item:!0,xs:12,children:e.jsx(f,{elevation:2,sx:{p:2},children:e.jsx(d,{variant:"h6",children:"Comparison Summary"})})})}),U=()=>e.jsx(i,{container:!0,spacing:3,children:e.jsx(i,{item:!0,xs:12,children:e.jsx(f,{elevation:2,sx:{p:2},children:e.jsx(d,{variant:"h6",children:"Keyword Analysis"})})})}),F=()=>e.jsx(i,{container:!0,spacing:3,children:e.jsx(i,{item:!0,xs:12,children:e.jsx(f,{elevation:2,sx:{p:2},children:e.jsx(d,{variant:"h6",children:"Review Analysis"})})})}),K=()=>e.jsx(i,{container:!0,spacing:3,children:e.jsx(i,{item:!0,xs:12,children:e.jsx(f,{elevation:2,sx:{p:2},children:e.jsx(d,{variant:"h6",children:"Metadata Analysis"})})})}),W=()=>e.jsx(i,{container:!0,spacing:3,children:e.jsx(i,{item:!0,xs:12,children:e.jsx(f,{elevation:2,sx:{p:2},children:e.jsx(d,{variant:"h6",children:"Performance Metrics"})})})});return e.jsx(k,{maxWidth:"lg",children:e.jsxs(j,{py:4,children:[e.jsx(d,{variant:"h4",gutterBottom:!0,children:"ASO Analysis Tool"}),e.jsx(A,{sx:{mb:4},children:e.jsxs(z,{children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:"Your App"}),e.jsx(b,{fullWidth:!0,label:"Play Store URL",value:n.url,onChange:P,variant:"outlined",placeholder:"https://play.google.com/store/apps/details?id=your.app.id",sx:{mb:2}}),n.appId&&e.jsx(q,{label:`App ID: ${n.appId}`,variant:"outlined",size:"small"})]})}),e.jsx(A,{sx:{mb:4},children:e.jsxs(z,{children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:"Competitors"}),e.jsxs(j,{sx:{mb:2},children:[e.jsx(b,{fullWidth:!0,label:"Add Competitor URL",value:s,onChange:t=>r(t.target.value),variant:"outlined",placeholder:"https://play.google.com/store/apps/details?id=competitor.app.id",sx:{mb:1}}),e.jsx(R,{variant:"contained",startIcon:e.jsx(ae,{}),onClick:w,disabled:!s,children:"Add Competitor"})]}),D()]})}),e.jsx(j,{sx:{mb:4},children:e.jsx(R,{variant:"contained",color:"primary",size:"large",onClick:V,disabled:!n.appId||n.loading,startIcon:n.loading?e.jsx(G,{size:20}):e.jsx(oe,{}),children:n.loading?"Analyzing...":"Analyze"})}),H()]})})},de=Z({palette:{mode:"light",primary:{main:"#2196f3"},secondary:{main:"#f50057"}}});function pe(){return e.jsxs(ee,{theme:de,children:[e.jsx(te,{}),e.jsx(ce,{})]})}I.createRoot(document.getElementById("root")).render(e.jsx(se.StrictMode,{children:e.jsx(pe,{})}));
